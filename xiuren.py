param = """MIME类型: application/x-www-form-urlencoded; charset=UTF-8
lang: en_US
action: jnews_module_ajax_jnews_block_15
module: true
data[filter]: 0
data[filter_type]: all
data[current_page]: 2
data[attribute][header_icon]
data[attribute][first_title]
data[attribute][second_title]
data[attribute][url]
data[attribute][header_type]: heading_6
data[attribute][header_background]
data[attribute][header_secondary_background]
data[attribute][header_text_color]
data[attribute][header_line_color]
data[attribute][header_accent_color]
data[attribute][header_filter_category]
data[attribute][header_filter_author]
data[attribute][header_filter_tag]
data[attribute][header_filter_text]: All
data[attribute][post_type]: post
data[attribute][content_type]: all
data[attribute][sponsor]: false
data[attribute][number_post]: 27
data[attribute][post_offset]: 0
data[attribute][unique_content]: disable
data[attribute][include_post]
data[attribute][included_only]: false
data[attribute][exclude_post]
data[attribute][include_category]
data[attribute][exclude_category]
data[attribute][include_author]
data[attribute][include_tag]
data[attribute][exclude_tag]
data[attribute][sort_by]: latest
data[attribute][date_format]: default
data[attribute][date_format_custom]: Y/m/d
data[attribute][force_normal_image_load]
data[attribute][pagination_mode]: scrollload
data[attribute][pagination_nextprev_showtext]
data[attribute][pagination_number_post][unit]: px
data[attribute][pagination_number_post][size]: 18
data[attribute][pagination_scroll_limit]: 3
data[attribute][el_id]
data[attribute][el_class]
data[attribute][scheme]
data[attribute][column_width]: auto
data[attribute][title_color]
data[attribute][accent_color]
data[attribute][alt_color]
data[attribute][excerpt_color]
data[attribute][css]
data[attribute][title_typography_typography]
data[attribute][title_typography_font_family]
data[attribute][title_typography_font_size][unit]: px
data[attribute][title_typography_font_size][size]
data[attribute][title_typography_font_weight]
data[attribute][title_typography_text_transform]
data[attribute][title_typography_font_style]
data[attribute][title_typography_text_decoration]
data[attribute][title_typography_line_height][unit]: px
data[attribute][title_typography_line_height][size]
data[attribute][title_typography_letter_spacing][unit]: px
data[attribute][title_typography_letter_spacing][size]
data[attribute][title_typography_word_spacing][unit]: px
data[attribute][title_typography_word_spacing][size]
data[attribute][meta_typography_typography]
data[attribute][meta_typography_font_family]
data[attribute][meta_typography_font_size][unit]: px
data[attribute][meta_typography_font_size][size]
data[attribute][meta_typography_font_weight]
data[attribute][meta_typography_text_transform]
data[attribute][meta_typography_font_style]
data[attribute][meta_typography_text_decoration]
data[attribute][meta_typography_line_height][unit]: px
data[attribute][meta_typography_line_height][size]
data[attribute][meta_typography_letter_spacing][unit]: px
data[attribute][meta_typography_letter_spacing][size]
data[attribute][meta_typography_word_spacing][unit]: px
data[attribute][meta_typography_word_spacing][size]
data[attribute][_title]
data[attribute][_margin][unit]: px
data[attribute][_margin][top]
data[attribute][_margin][right]
data[attribute][_margin][bottom]
data[attribute][_margin][left]
data[attribute][_margin][isLinked]: true
data[attribute][_padding][unit]: px
data[attribute][_padding][top]
data[attribute][_padding][right]
data[attribute][_padding][bottom]
data[attribute][_padding][left]
data[attribute][_padding][isLinked]: true
data[attribute][_element_width]
data[attribute][_element_width_tablet]
data[attribute][_element_width_mobile]
data[attribute][_element_custom_width][unit]: %
data[attribute][_element_custom_width][size]
data[attribute][_element_vertical_align]
data[attribute][_position]
data[attribute][_offset_orientation_h]: start
data[attribute][_offset_x][unit]: px
data[attribute][_offset_x][size]: 0
data[attribute][_offset_x_end][unit]: px
data[attribute][_offset_x_end][size]: 0
data[attribute][_offset_orientation_v]: start
data[attribute][_offset_y][unit]: px
data[attribute][_offset_y][size]: 0
data[attribute][_offset_y_end][unit]: px
data[attribute][_offset_y_end][size]: 0
data[attribute][_z_index]
data[attribute][_element_id]
data[attribute][_css_classes]
data[attribute][_animation]
data[attribute][_animation_tablet]
data[attribute][_animation_mobile]
data[attribute][animation_duration]
data[attribute][_animation_delay]
data[attribute][_transform_rotate_popover]
data[attribute][_transform_rotateZ_effect][unit]: px
data[attribute][_transform_rotateZ_effect][size]
data[attribute][_transform_rotateZ_effect_tablet][unit]: deg
data[attribute][_transform_rotateZ_effect_tablet][size]
data[attribute][_transform_rotateZ_effect_mobile][unit]: deg
data[attribute][_transform_rotateZ_effect_mobile][size]
data[attribute][_transform_rotate_3d]
data[attribute][_transform_rotateX_effect][unit]: px
data[attribute][_transform_rotateX_effect][size]
data[attribute][_transform_rotateX_effect_tablet][unit]: deg
data[attribute][_transform_rotateX_effect_tablet][size]
data[attribute][_transform_rotateX_effect_mobile][unit]: deg
data[attribute][_transform_rotateX_effect_mobile][size]
data[attribute][_transform_rotateY_effect][unit]: px
data[attribute][_transform_rotateY_effect][size]
data[attribute][_transform_rotateY_effect_tablet][unit]: deg
data[attribute][_transform_rotateY_effect_tablet][size]
data[attribute][_transform_rotateY_effect_mobile][unit]: deg
data[attribute][_transform_rotateY_effect_mobile][size]
data[attribute][_transform_perspective_effect][unit]: px
data[attribute][_transform_perspective_effect][size]
data[attribute][_transform_perspective_effect_tablet][unit]: px
data[attribute][_transform_perspective_effect_tablet][size]
data[attribute][_transform_perspective_effect_mobile][unit]: px
data[attribute][_transform_perspective_effect_mobile][size]
data[attribute][_transform_translate_popover]
data[attribute][_transform_translateX_effect][unit]: px
data[attribute][_transform_translateX_effect][size]
data[attribute][_transform_translateX_effect_tablet][unit]: px
data[attribute][_transform_translateX_effect_tablet][size]
data[attribute][_transform_translateX_effect_mobile][unit]: px
data[attribute][_transform_translateX_effect_mobile][size]
data[attribute][_transform_translateY_effect][unit]: px
data[attribute][_transform_translateY_effect][size]
data[attribute][_transform_translateY_effect_tablet][unit]: px
data[attribute][_transform_translateY_effect_tablet][size]
data[attribute][_transform_translateY_effect_mobile][unit]: px
data[attribute][_transform_translateY_effect_mobile][size]
data[attribute][_transform_scale_popover]
data[attribute][_transform_keep_proportions]: yes
data[attribute][_transform_scale_effect][unit]: px
data[attribute][_transform_scale_effect][size]
data[attribute][_transform_scale_effect_tablet][unit]: px
data[attribute][_transform_scale_effect_tablet][size]
data[attribute][_transform_scale_effect_mobile][unit]: px
data[attribute][_transform_scale_effect_mobile][size]
data[attribute][_transform_scaleX_effect][unit]: px
data[attribute][_transform_scaleX_effect][size]
data[attribute][_transform_scaleX_effect_tablet][unit]: px
data[attribute][_transform_scaleX_effect_tablet][size]
data[attribute][_transform_scaleX_effect_mobile][unit]: px
data[attribute][_transform_scaleX_effect_mobile][size]
data[attribute][_transform_scaleY_effect][unit]: px
data[attribute][_transform_scaleY_effect][size]
data[attribute][_transform_scaleY_effect_tablet][unit]: px
data[attribute][_transform_scaleY_effect_tablet][size]
data[attribute][_transform_scaleY_effect_mobile][unit]: px
data[attribute][_transform_scaleY_effect_mobile][size]
data[attribute][_transform_skew_popover]
data[attribute][_transform_skewX_effect][unit]: px
data[attribute][_transform_skewX_effect][size]
data[attribute][_transform_skewX_effect_tablet][unit]: deg
data[attribute][_transform_skewX_effect_tablet][size]
data[attribute][_transform_skewX_effect_mobile][unit]: deg
data[attribute][_transform_skewX_effect_mobile][size]
data[attribute][_transform_skewY_effect][unit]: px
data[attribute][_transform_skewY_effect][size]
data[attribute][_transform_skewY_effect_tablet][unit]: deg
data[attribute][_transform_skewY_effect_tablet][size]
data[attribute][_transform_skewY_effect_mobile][unit]: deg
data[attribute][_transform_skewY_effect_mobile][size]
data[attribute][_transform_flipX_effect]
data[attribute][_transform_flipY_effect]
data[attribute][_transform_rotate_popover_hover]
data[attribute][_transform_rotateZ_effect_hover][unit]: px
data[attribute][_transform_rotateZ_effect_hover][size]
data[attribute][_transform_rotateZ_effect_hover_tablet][unit]: deg
data[attribute][_transform_rotateZ_effect_hover_tablet][size]
data[attribute][_transform_rotateZ_effect_hover_mobile][unit]: deg
data[attribute][_transform_rotateZ_effect_hover_mobile][size]
data[attribute][_transform_rotate_3d_hover]
data[attribute][_transform_rotateX_effect_hover][unit]: px
data[attribute][_transform_rotateX_effect_hover][size]
data[attribute][_transform_rotateX_effect_hover_tablet][unit]: deg
data[attribute][_transform_rotateX_effect_hover_tablet][size]
data[attribute][_transform_rotateX_effect_hover_mobile][unit]: deg
data[attribute][_transform_rotateX_effect_hover_mobile][size]
data[attribute][_transform_rotateY_effect_hover][unit]: px
data[attribute][_transform_rotateY_effect_hover][size]
data[attribute][_transform_rotateY_effect_hover_tablet][unit]: deg
data[attribute][_transform_rotateY_effect_hover_tablet][size]
data[attribute][_transform_rotateY_effect_hover_mobile][unit]: deg
data[attribute][_transform_rotateY_effect_hover_mobile][size]
data[attribute][_transform_perspective_effect_hover][unit]: px
data[attribute][_transform_perspective_effect_hover][size]
data[attribute][_transform_perspective_effect_hover_tablet][unit]: px
data[attribute][_transform_perspective_effect_hover_tablet][size]
data[attribute][_transform_perspective_effect_hover_mobile][unit]: px
data[attribute][_transform_perspective_effect_hover_mobile][size]
data[attribute][_transform_translate_popover_hover]
data[attribute][_transform_translateX_effect_hover][unit]: px
data[attribute][_transform_translateX_effect_hover][size]
data[attribute][_transform_translateX_effect_hover_tablet][unit]: px
data[attribute][_transform_translateX_effect_hover_tablet][size]
data[attribute][_transform_translateX_effect_hover_mobile][unit]: px
data[attribute][_transform_translateX_effect_hover_mobile][size]
data[attribute][_transform_translateY_effect_hover][unit]: px
data[attribute][_transform_translateY_effect_hover][size]
data[attribute][_transform_translateY_effect_hover_tablet][unit]: px
data[attribute][_transform_translateY_effect_hover_tablet][size]
data[attribute][_transform_translateY_effect_hover_mobile][unit]: px
data[attribute][_transform_translateY_effect_hover_mobile][size]
data[attribute][_transform_scale_popover_hover]
data[attribute][_transform_keep_proportions_hover]: yes
data[attribute][_transform_scale_effect_hover][unit]: px
data[attribute][_transform_scale_effect_hover][size]
data[attribute][_transform_scale_effect_hover_tablet][unit]: px
data[attribute][_transform_scale_effect_hover_tablet][size]
data[attribute][_transform_scale_effect_hover_mobile][unit]: px
data[attribute][_transform_scale_effect_hover_mobile][size]
data[attribute][_transform_scaleX_effect_hover][unit]: px
data[attribute][_transform_scaleX_effect_hover][size]
data[attribute][_transform_scaleX_effect_hover_tablet][unit]: px
data[attribute][_transform_scaleX_effect_hover_tablet][size]
data[attribute][_transform_scaleX_effect_hover_mobile][unit]: px
data[attribute][_transform_scaleX_effect_hover_mobile][size]
data[attribute][_transform_scaleY_effect_hover][unit]: px
data[attribute][_transform_scaleY_effect_hover][size]
data[attribute][_transform_scaleY_effect_hover_tablet][unit]: px
data[attribute][_transform_scaleY_effect_hover_tablet][size]
data[attribute][_transform_scaleY_effect_hover_mobile][unit]: px
data[attribute][_transform_scaleY_effect_hover_mobile][size]
data[attribute][_transform_skew_popover_hover]
data[attribute][_transform_skewX_effect_hover][unit]: px
data[attribute][_transform_skewX_effect_hover][size]
data[attribute][_transform_skewX_effect_hover_tablet][unit]: deg
data[attribute][_transform_skewX_effect_hover_tablet][size]
data[attribute][_transform_skewX_effect_hover_mobile][unit]: deg
data[attribute][_transform_skewX_effect_hover_mobile][size]
data[attribute][_transform_skewY_effect_hover][unit]: px
data[attribute][_transform_skewY_effect_hover][size]
data[attribute][_transform_skewY_effect_hover_tablet][unit]: deg
data[attribute][_transform_skewY_effect_hover_tablet][size]
data[attribute][_transform_skewY_effect_hover_mobile][unit]: deg
data[attribute][_transform_skewY_effect_hover_mobile][size]
data[attribute][_transform_flipX_effect_hover]
data[attribute][_transform_flipY_effect_hover]
data[attribute][_transform_transition_hover][unit]: px
data[attribute][_transform_transition_hover][size]
data[attribute][motion_fx_transform_x_anchor_point]
data[attribute][motion_fx_transform_y_anchor_point]
data[attribute][_background_background]
data[attribute][_background_color]
data[attribute][_background_color_stop][unit]: %
data[attribute][_background_color_stop][size]: 0
data[attribute][_background_color_b]: #f2295b
data[attribute][_background_color_b_stop][unit]: %
data[attribute][_background_color_b_stop][size]: 100
data[attribute][_background_gradient_type]: linear
data[attribute][_background_gradient_angle][unit]: deg
data[attribute][_background_gradient_angle][size]: 180
data[attribute][_background_gradient_position]: center center
data[attribute][_background_image][url]
data[attribute][_background_image][id]
data[attribute][_background_image][size]
data[attribute][_background_position]
data[attribute][_background_xpos][unit]: px
data[attribute][_background_xpos][size]: 0
data[attribute][_background_ypos][unit]: px
data[attribute][_background_ypos][size]: 0
data[attribute][_background_attachment]
data[attribute][_background_repeat]
data[attribute][_background_size]
data[attribute][_background_bg_width][unit]: %
data[attribute][_background_bg_width][size]: 100
data[attribute][_background_video_link]
data[attribute][_background_video_start]
data[attribute][_background_video_end]
data[attribute][_background_play_once]
data[attribute][_background_play_on_mobile]
data[attribute][_background_privacy_mode]
data[attribute][_background_video_fallback][url]
data[attribute][_background_video_fallback][id]
data[attribute][_background_video_fallback][size]
data[attribute][_background_slideshow_loop]: yes
data[attribute][_background_slideshow_slide_duration]: 5000
data[attribute][_background_slideshow_slide_transition]: fade
data[attribute][_background_slideshow_transition_duration]: 500
data[attribute][_background_slideshow_background_size]
data[attribute][_background_slideshow_background_position]
data[attribute][_background_slideshow_lazyload]
data[attribute][_background_slideshow_ken_burns]
data[attribute][_background_slideshow_ken_burns_zoom_direction]: in
data[attribute][_background_hover_background]
data[attribute][_background_hover_color]
data[attribute][_background_hover_color_stop][unit]: %
data[attribute][_background_hover_color_stop][size]: 0
data[attribute][_background_hover_color_b]: #f2295b
data[attribute][_background_hover_color_b_stop][unit]: %
data[attribute][_background_hover_color_b_stop][size]: 100
data[attribute][_background_hover_gradient_type]: linear
data[attribute][_background_hover_gradient_angle][unit]: deg
data[attribute][_background_hover_gradient_angle][size]: 180
data[attribute][_background_hover_gradient_position]: center center
data[attribute][_background_hover_image][url]
data[attribute][_background_hover_image][id]
data[attribute][_background_hover_image][size]
data[attribute][_background_hover_position]
data[attribute][_background_hover_xpos][unit]: px
data[attribute][_background_hover_xpos][size]: 0
data[attribute][_background_hover_ypos][unit]: px
data[attribute][_background_hover_ypos][size]: 0
data[attribute][_background_hover_attachment]
data[attribute][_background_hover_repeat]
data[attribute][_background_hover_size]
data[attribute][_background_hover_bg_width][unit]: %
data[attribute][_background_hover_bg_width][size]: 100
data[attribute][_background_hover_video_link]
data[attribute][_background_hover_video_start]
data[attribute][_background_hover_video_end]
data[attribute][_background_hover_play_once]
data[attribute][_background_hover_play_on_mobile]
data[attribute][_background_hover_privacy_mode]
data[attribute][_background_hover_video_fallback][url]
data[attribute][_background_hover_video_fallback][id]
data[attribute][_background_hover_video_fallback][size]
data[attribute][_background_hover_slideshow_loop]: yes
data[attribute][_background_hover_slideshow_slide_duration]: 5000
data[attribute][_background_hover_slideshow_slide_transition]: fade
data[attribute][_background_hover_slideshow_transition_duration]: 500
data[attribute][_background_hover_slideshow_background_size]
data[attribute][_background_hover_slideshow_background_position]
data[attribute][_background_hover_slideshow_lazyload]
data[attribute][_background_hover_slideshow_ken_burns]
data[attribute][_background_hover_slideshow_ken_burns_zoom_direction]: in
data[attribute][_background_hover_transition][unit]: px
data[attribute][_background_hover_transition][size]
data[attribute][_border_border]
data[attribute][_border_width][unit]: px
data[attribute][_border_width][top]
data[attribute][_border_width][right]
data[attribute][_border_width][bottom]
data[attribute][_border_width][left]
data[attribute][_border_width][isLinked]: true
data[attribute][_border_color]
data[attribute][_border_radius][unit]: px
data[attribute][_border_radius][top]
data[attribute][_border_radius][right]
data[attribute][_border_radius][bottom]
data[attribute][_border_radius][left]
data[attribute][_border_radius][isLinked]: true
data[attribute][_box_shadow_box_shadow_type]
data[attribute][_box_shadow_box_shadow][horizontal]: 0
data[attribute][_box_shadow_box_shadow][vertical]: 0
data[attribute][_box_shadow_box_shadow][blur]: 10
data[attribute][_box_shadow_box_shadow][spread]: 0
data[attribute][_box_shadow_box_shadow][color]: rgba(0,0,0,0.5)
data[attribute][_box_shadow_box_shadow_position]:
data[attribute][_border_hover_border]
data[attribute][_border_hover_width][unit]: px
data[attribute][_border_hover_width][top]
data[attribute][_border_hover_width][right]
data[attribute][_border_hover_width][bottom]
data[attribute][_border_hover_width][left]
data[attribute][_border_hover_width][isLinked]: true
data[attribute][_border_hover_color]
data[attribute][_border_radius_hover][unit]: px
data[attribute][_border_radius_hover][top]
data[attribute][_border_radius_hover][right]
data[attribute][_border_radius_hover][bottom]
data[attribute][_border_radius_hover][left]
data[attribute][_border_radius_hover][isLinked]: true
data[attribute][_box_shadow_hover_box_shadow_type]
data[attribute][_box_shadow_hover_box_shadow][horizontal]: 0
data[attribute][_box_shadow_hover_box_shadow][vertical]: 0
data[attribute][_box_shadow_hover_box_shadow][blur]: 10
data[attribute][_box_shadow_hover_box_shadow][spread]: 0
data[attribute][_box_shadow_hover_box_shadow][color]: rgba(0,0,0,0.5)
data[attribute][_box_shadow_hover_box_shadow_position]:
data[attribute][_border_hover_transition][unit]: px
data[attribute][_border_hover_transition][size]
data[attribute][_mask_switch]
data[attribute][_mask_shape]: circle
data[attribute][_mask_image][url]
data[attribute][_mask_image][id]
data[attribute][_mask_image][size]
data[attribute][_mask_notice]
data[attribute][_mask_size]: contain
data[attribute][_mask_size_scale][unit]: %
data[attribute][_mask_size_scale][size]: 100
data[attribute][_mask_position]: center center
data[attribute][_mask_position_x][unit]: %
data[attribute][_mask_position_x][size]: 0
data[attribute][_mask_position_y][unit]: %
data[attribute][_mask_position_y][size]: 0
data[attribute][_mask_repeat]: no-repeat
data[attribute][hide_desktop]
data[attribute][hide_tablet]
data[attribute][hide_mobile]
data[attribute][paged]: 1
data[attribute][column_class]: jeg_col_3o3
data[attribute][class]: jnews_block_15"""
OUT_FILE = "xiuren.struct"

def parse_int(s: str):
    if len(s) == 0:
        return None
    
    for c in s:
        if not c.isnumeric():
            return None
        
    return int(s)

def parse(lines: list[str]):
    json_map = {}
    for line in lines:
        pos = line.find(":")
        if pos == -1:
            json_map[line.strip()] = None
        else:
            key = line[:pos].strip()
            value = line[pos+1:].strip()
            number = parse_int(value)
            if number is None:
                json_map[key] = ("str", value)
            else:
                json_map[key] = ("num", number)
    
    lines = []
    lines.append("#[derive(Serialize, Debug)]")
    lines.append("struct Body<'a> {")
    count = 0
    for item in json_map.items():
        key = item[0]
        value = item[1]
        
        if key == "data[current_page]":
            lines.append("    page: i32,")
            continue
            
        count += 1
        lines.append(f"    #[serde(rename = \"{key}\")]")
        if value is None:
            lines.append(f"    param_{count}: &'a str,")
        else:
            if value[0] == "str":
                lines.append(f"    param_{count}: &'a str,")
            else:
                lines.append(f"    param_{count}: i32,")
    lines.append("}")
    lines.append("impl<'a> Body<'a> {")
    lines.append("    fn new(page: i32) -> Self {")
    lines.append("        Self {")
    count = 0
    for item in json_map.items():
        key = item[0]
        value = item[1]
        
        if key == "data[current_page]":
            lines.append("            page,")
            continue
            
        count += 1
        if value is None:
            lines.append(f"            param_{count}: \"\",")
        else:
            if value[0] == "str":
                lines.append(f"            param_{count}: \"{value[1]}\",")
            else:
                lines.append(f"            param_{count}: {value[1]},")
    lines.append("        }")
    lines.append("    }")
    lines.append("}")
            
    with open(OUT_FILE, "w") as f:
        f.write("\n".join(lines))

lines = []
lines.extend(param.split("\n"))
parse(lines)
